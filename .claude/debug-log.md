# HukuLog_T3Stack ãƒ‡ãƒãƒƒã‚°è¨˜éŒ²

## ãƒ‡ãƒãƒƒã‚°æƒ…å ±ç®¡ç†ãƒ«ãƒ¼ãƒ«

### æ°¸ç¶šåŒ–åŸºæº–
ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™å•é¡Œã¯ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²ã™ã‚‹ï¼š
- **è§£æ±ºæ™‚é–“**: 30åˆ†ä»¥ä¸Šè¦ã—ãŸå•é¡Œ
- **å†ç™ºå¯èƒ½æ€§**: åŒæ§˜ã®å•é¡ŒãŒå†ç™ºã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„
- **å½±éŸ¿ç¯„å›²**: ãƒãƒ¼ãƒ ï¼ˆå°†æ¥çš„ãªå”åŠ›è€…ï¼‰ã«å…±æœ‰ã™ã¹ãçŸ¥è¦‹
- **æŠ€è¡“çš„ä¾¡å€¤**: T3 Stackç‰¹æœ‰ã®å•é¡Œã‚„è§£æ±ºæ³•

### è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```markdown
## [YYYY-MM-DD] å•é¡Œã®æ¦‚è¦

**ç—‡çŠ¶**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„ç•°å¸¸å‹•ä½œã®è©³ç´°
**ç’°å¢ƒ**: OS, Node.js, ãƒ–ãƒ©ã‚¦ã‚¶, ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ³
**å†ç¾æ‰‹é †**: å…·ä½“çš„ãªæ“ä½œæ‰‹é †ï¼ˆ1. 2. 3...ï¼‰
**è©¦è¡ŒéŒ¯èª¤**: è©¦ã—ãŸæ–¹æ³•ã¨ãã®çµæœï¼ˆâŒ/âœ…ã§è¡¨ç¤ºï¼‰
**æœ€çµ‚è§£æ±ºæ–¹æ³•**: ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹è§£æ±ºæ‰‹é †
**æ ¹æœ¬åŸå› **: å•é¡Œã®æœ¬è³ªçš„ãªåŸå› 
**äºˆé˜²ç­–**: åŒã˜å•é¡Œã‚’é¿ã‘ã‚‹ãŸã‚ã®å¯¾ç­–
**é–¢é€£è³‡æ–™**: å‚è€ƒã«ã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„Issue
```

---

## [2025-06-21] çŸ¥è¦‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸæ§‹ç¯‰

**ç—‡çŠ¶**: Claude Codeã§ã®é–‹ç™ºåŠ¹ç‡åŒ–ã®ãŸã‚ã®çŸ¥è¦‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãŒæœªæ•´å‚™
**ç’°å¢ƒ**: 
- Windows 11
- Node.js 18.17.0
- HukuLog_T3Stack repository

**å®Ÿè£…å†…å®¹**:
1. Zennè¨˜äº‹ã€ŒClaude Codeã§åŠ¹ç‡çš„ã«é–‹ç™ºã™ã‚‹ãŸã‚ã®çŸ¥è¦‹ç®¡ç†ã€ã‚’å‚è€ƒ
2. HukuLog_T3Stackç”¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸçŸ¥è¦‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰
3. ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆï¼š
   - `.claude/context.md`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèƒŒæ™¯ãƒ»åˆ¶ç´„ãƒ»æŠ€è¡“é¸å®šç†ç”±
   - `.claude/project-knowledge.md`: T3 Stackå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨è¨­è¨ˆçŸ¥è¦‹
   - `.claude/project-improvements.md`: æ”¹å–„å±¥æ­´
   - `.claude/common-patterns.md`: é »ç”¨ã‚³ãƒãƒ³ãƒ‰ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
   - `.claude/debug-log.md`: æœ¬ãƒ•ã‚¡ã‚¤ãƒ«

**æœŸå¾…åŠ¹æœ**:
- Claude Codeã§ã®é–‹ç™ºæ™‚ã®æ–‡è„ˆå…±æœ‰åŠ¹ç‡åŒ–
- éå»ã®è¨­è¨ˆæ±ºå®šã‚„æŠ€è¡“çš„çŸ¥è¦‹ã®è“„ç©
- æ–°æ©Ÿèƒ½é–‹ç™ºæ™‚ã®ä¸€è²«æ€§ç¢ºä¿
- ãƒ‡ãƒãƒƒã‚°æ™‚é–“ã®çŸ­ç¸®

**ä»Šå¾Œã®é‹ç”¨æ–¹é‡**:
- é‡è¦ãªå®Ÿè£…ã‚„æ±ºå®šæ™‚ã®çŸ¥è¦‹ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°ã‚’ç¿’æ…£åŒ–
- æœˆ1å›ã®å®šæœŸçš„ãªæƒ…å ±æ•´ç†ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
- æ–°ã—ã„å•é¡Œè§£æ±ºæ™‚ã®ç©æ¥µçš„ãªè¨˜éŒ²

---

## T3 Stackç‰¹æœ‰ã®å•é¡Œã¨è§£æ±ºæ³•

### tRPCã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: `useQuery` ãƒ•ãƒƒã‚¯ã§ã®å‹ã‚¨ãƒ©ãƒ¼ã‚„å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼
**ç’°å¢ƒ**: Next.js 15, tRPC v11
**å†ç¾æ‰‹é †**:
1. tRPCã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨
2. `api.items.list.useQuery()` ã‚’å®Ÿè¡Œ
3. TypeScriptã‚¨ãƒ©ãƒ¼ã¾ãŸã¯å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ

**ã‚ˆãã‚ã‚‹åŸå› ã¨è§£æ±ºæ³•**:

#### 1. Providerè¨­å®šã®ä¸å‚™
âŒ **å•é¡Œ**: TRPCProviderãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ„ãƒªãƒ¼ã§ä¸é©åˆ‡ã«é…ç½®
```typescript
// é–“é•ã£ãŸä¾‹
export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
        <TRPCReactProvider>{/* Providerã®ä½ç½®ãŒé–“é•ã„ */}</TRPCReactProvider>
      </body>
    </html>
  );
}
```

âœ… **è§£æ±ºæ³•**: é©åˆ‡ãªProvideré…ç½®
```typescript
// æ­£ã—ã„ä¾‹
export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <TRPCReactProvider>
          {children}
        </TRPCReactProvider>
      </body>
    </html>
  );
}
```

#### 2. Server Componentã§ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ•ãƒƒã‚¯ä½¿ç”¨
âŒ **å•é¡Œ**: Server Componentã§useQueryã‚’ç›´æ¥ä½¿ç”¨
```typescript
// app/page.tsx (Server Component)
export default function HomePage() {
  const { data } = api.items.list.useQuery(); // ã‚¨ãƒ©ãƒ¼ï¼
  return <div>{/* ... */}</div>;
}
```

âœ… **è§£æ±ºæ³•**: Client Componentã®ä½œæˆã¾ãŸã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å–å¾—
```typescript
// components/ItemsList.tsx (Client Component)
'use client';

export function ItemsList() {
  const { data } = api.items.list.useQuery();
  return <div>{/* ... */}</div>;
}

// ã¾ãŸã¯ Server Actionä½¿ç”¨
// app/page.tsx
import { api } from '@/trpc/server';

export default async function HomePage() {
  const items = await api.items.list();
  return <div>{/* ... */}</div>;
}
```

### Drizzle ORMã§ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å–å¾—å•é¡Œ

**ç—‡çŠ¶**: ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããªã„ã€ã¾ãŸã¯N+1ã‚¯ã‚¨ãƒªãŒç™ºç”Ÿ
**å†ç¾æ‰‹é †**:
1. ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å«ã‚€ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œ
2. é–¢é€£ãƒ‡ãƒ¼ã‚¿ãŒ undefined ã¾ãŸã¯ç©º
3. ãƒ­ã‚°ã§å¤§é‡ã®ã‚¯ã‚¨ãƒªå®Ÿè¡Œã‚’ç¢ºèª

**è§£æ±ºãƒ‘ã‚¿ãƒ¼ãƒ³**:

#### 1. ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©ã®ç¢ºèª
```typescript
// schema/items.ts
export const itemsRelations = relations(items, ({ one, many }) => ({
  owner: one(users, {
    fields: [items.userId],
    references: [users.id],
  }),
  categories: many(itemCategories), // æ­£ã—ãå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
}));
```

#### 2. ã‚¯ã‚¨ãƒªã§ã®æ˜ç¤ºçš„ãªwithæŒ‡å®š
```typescript
// âŒ ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå–å¾—ã•ã‚Œãªã„
const items = await db.query.items.findMany();

// âœ… withã§æ˜ç¤ºçš„ã«æŒ‡å®š
const items = await db.query.items.findMany({
  with: {
    owner: true,
    categories: true,
  },
});
```

### Better Authã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å•é¡Œ

**ç—‡çŠ¶**: ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ãŒå–å¾—ã§ããªã„
**ç’°å¢ƒ**: Better Auth v1.2.x, Next.js 15

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
1. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
   ```env
   BETTER_AUTH_SECRET=your-32-character-secret-key
   BETTER_AUTH_URL=http://localhost:3000
   ```

2. **ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢è¨­å®š**
   ```typescript
   // middleware.ts
   import { betterAuth } from "better-auth";
   
   export default betterAuth({
     secret: process.env.BETTER_AUTH_SECRET!,
     baseURL: process.env.BETTER_AUTH_URL!,
   }).middleware;
   ```

3. **Cookieã®è¨­å®šç¢ºèª**
   - SameSiteå±æ€§ã®é©åˆ‡ãªè¨­å®š
   - HTTPSã§ã®Secureå±æ€§
   - Domainè¨­å®šã®ç¢ºèª

### SimpleWebAuthnï¼ˆPasskeyï¼‰ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œå•é¡Œ

**ç—‡çŠ¶**: ç‰¹å®šã®ãƒ–ãƒ©ã‚¦ã‚¶ã§Passkeyèªè¨¼ãŒå‹•ä½œã—ãªã„
**å¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶ç¢ºèªãƒªã‚¹ãƒˆ**:
- âœ… Chrome 108+
- âœ… Firefox 113+
- âœ… Safari 16+
- âœ… Edge 108+
- âŒ iOS Safari 15ä»¥ä¸‹
- âŒ Android Chrome 107ä»¥ä¸‹

**ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…**:
```typescript
// WebAuthnå¯¾å¿œç¢ºèª
const isWebAuthnSupported = () => {
  return typeof window !== 'undefined' && 
         'navigator' in window && 
         'credentials' in navigator;
};

// ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯èªè¨¼ã®æä¾›
if (!isWebAuthnSupported()) {
  // ãƒ¡ãƒ¼ãƒ«ï¼‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  return <EmailPasswordAuth />;
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é–¢é€£ã®å•é¡Œ

### ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡æ€¥å¢—

**ç—‡çŠ¶**: å¤§ããªç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ–ãƒ©ã‚¦ã‚¶ãŒãƒ•ãƒªãƒ¼ã‚º
**åŸå› **: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®ç”»åƒå‡¦ç†æ™‚ã®ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯

**è§£æ±ºæ³•**:
```typescript
// ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ãªç”»åƒãƒªã‚µã‚¤ã‚º
const resizeImage = async (file: File, maxWidth: number): Promise<File> => {
  return new Promise((resolve) => {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d')!;
    const img = new Image();
    
    img.onload = () => {
      // ãƒªã‚µã‚¤ã‚ºå‡¦ç†
      const { width, height } = calculateDimensions(img.width, img.height, maxWidth);
      canvas.width = width;
      canvas.height = height;
      
      ctx.drawImage(img, 0, 0, width, height);
      
      canvas.toBlob((blob) => {
        if (blob) {
          resolve(new File([blob], file.name, { type: 'image/webp' }));
        }
      }, 'image/webp', 0.8);
      
      // ãƒ¡ãƒ¢ãƒªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
      canvas.width = 0;
      canvas.height = 0;
    };
    
    img.src = URL.createObjectURL(file);
  });
};
```

### PostgreSQLæ¥ç¶šæ•°ä¸Šé™ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: `sorry, too many clients already` ã‚¨ãƒ©ãƒ¼
**åŸå› **: Drizzleæ¥ç¶šãƒ—ãƒ¼ãƒ«ã®è¨­å®šä¸å‚™

**è§£æ±ºæ³•**:
```typescript
// drizzle.config.ts
import { drizzle } from 'drizzle-orm/postgres-js';
import postgres from 'postgres';

const client = postgres(process.env.DATABASE_URL!, {
  max: 10, // æ¥ç¶šãƒ—ãƒ¼ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™
  idle_timeout: 20,
  connect_timeout: 10,
});

export const db = drizzle(client);
```

## é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®è½ã¨ã—ç©´

### Docker Composeã§ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šå•é¡Œ

**ç—‡çŠ¶**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰PostgreSQLã«æ¥ç¶šã§ããªã„
**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
1. ãƒãƒ¼ãƒˆç•ªå·ã®é‡è¤‡ç¢ºèª
2. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã®ç¢ºèª
3. ç’°å¢ƒå¤‰æ•°ã®ãƒ›ã‚¹ãƒˆåè¨­å®š

**è§£æ±ºä¾‹**:
```yaml
# docker-compose.yml
services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: hukulog
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
    networks:
      - hukulog_network

  app:
    build: .
    environment:
      DATABASE_URL: postgresql://postgres:password@postgres:5432/hukulog
    depends_on:
      - postgres
    networks:
      - hukulog_network

networks:
  hukulog_network:
```

### TailwindCSSè¨­å®šã§ã®ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨å•é¡Œ

**ç—‡çŠ¶**: Radix UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒåæ˜ ã•ã‚Œãªã„
**åŸå› **: TailwindCSSã®è¨­å®šã§Radix UIã‚¯ãƒ©ã‚¹ãŒå«ã¾ã‚Œã¦ã„ãªã„

**è§£æ±ºæ³•**:
```javascript
// tailwind.config.js
module.exports = {
  content: [
    './src/**/*.{js,ts,jsx,tsx,mdx}',
    './node_modules/@radix-ui/**/*.{js,ts,jsx,tsx}', // è¿½åŠ 
  ],
  // ...
};
```

---

## äºˆé˜²çš„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### å®šæœŸãƒã‚§ãƒƒã‚¯é …ç›®ï¼ˆæœˆ1å›ï¼‰

1. **ä¾å­˜é–¢ä¿‚ã®æ›´æ–°ç¢ºèª**
   ```bash
   npm audit
   npm outdated
   ```

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª**
   ```sql
   -- é…ã„ã‚¯ã‚¨ãƒªã®ç¢ºèª
   SELECT query, mean_exec_time, calls 
   FROM pg_stat_statements 
   ORDER BY mean_exec_time DESC 
   LIMIT 10;
   ```

3. **ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª**
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã®ã‚¨ãƒ©ãƒ¼ç¢ºèª
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ­ã‚°ã®è­¦å‘Šç¢ºèª
   - Vercelãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ­ã‚°ã®ç¢ºèª

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

1. **Core Web Vitals**
   - LCP (Largest Contentful Paint) < 2.5s
   - FID (First Input Delay) < 100ms
   - CLS (Cumulative Layout Shift) < 0.1

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç›£è¦–**
   - ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“ã®è¿½è·¡
   - æ¥ç¶šæ•°ã®ç›£è¦–
   - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½¿ç”¨ç‡ã®ç¢ºèª

3. **ç”»åƒæœ€é©åŒ–**
   - WebPå¤‰æ›ç‡ã®ç¢ºèª
   - ç”»åƒã‚µã‚¤ã‚ºã®å¹³å‡å€¤ç›£è¦–
   - CDN ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡

---

## ç·Šæ€¥æ™‚å¯¾å¿œæ‰‹é †

### ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢æ™‚ã®å¯¾å¿œ

1. **å³åº§ã®ç¢ºèªäº‹é …**
   - Vercelãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆçŠ¶æ³
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šçŠ¶æ³
   - å¤–éƒ¨APIï¼ˆèªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ç­‰ï¼‰ã®çŠ¶æ³

2. **ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †**
   ```bash
   # Vercelã§ã®å‰å›ãƒ‡ãƒ—ãƒ­ã‚¤ã«æˆ»ã™
   vercel --prod --force
   
   # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¢ºèª
   npm run db:studio
   ```

3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥**
   - çŠ¶æ³ã®é€æ˜ãªå ±å‘Š
   - å¾©æ—§äºˆå®šæ™‚åˆ»ã®å…±æœ‰
   - ä»£æ›¿æ‰‹æ®µã®ææ¡ˆï¼ˆå¯èƒ½ãªå ´åˆï¼‰

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ

1. **å³åº§ã®å¯¾å¿œ**
   - è©²å½“ã‚µãƒ¼ãƒ“ã‚¹ã®ä¸€æ™‚åœæ­¢
   - ãƒ­ã‚°ã®ä¿å…¨
   - å½±éŸ¿ç¯„å›²ã®ç‰¹å®š

2. **èª¿æŸ»ã¨å¯¾å¿œ**
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒã®é©ç”¨
   - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰/APIã‚­ãƒ¼ã®å¤‰æ›´
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥

3. **å†ç™ºé˜²æ­¢**
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã®å®Ÿæ–½
   - è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³ã®å®šæœŸåŒ–
   - ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®è¦‹ç›´ã—

---

## å¤–éƒ¨é€£æºæ™‚ã®æ³¨æ„ç‚¹

### Vercelãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

**ã‚ˆãã‚ã‚‹å•é¡Œ**:
- ç’°å¢ƒå¤‰æ•°ã®è¨­å®šæ¼ã‚Œ
- ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤å¤±æ•—
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€é©åŒ–å•é¡Œ

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build
npm run start

# ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
vercel env ls

# ãƒ­ã‚°ã®ç¢ºèª
vercel logs [deployment-url]
```

### Supabase/Railwayãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

**æ¥ç¶šå•é¡Œã®å¯¾å‡¦**:
1. æ¥ç¶šæ–‡å­—åˆ—ã®ç¢ºèª
2. IPè¨±å¯ãƒªã‚¹ãƒˆã®è¨­å®š
3. SSLè¨¼æ˜æ›¸ã®æ¤œè¨¼

**ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥**:
```bash
# å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
pg_dump $DATABASE_URL > backup_$(date +%Y%m%d).sql

# å¾©å…ƒæ‰‹é †
psql $DATABASE_URL < backup_20250621.sql
```

---

## [2025-06-25] ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„å•é¡Œ

**ç—‡çŠ¶**: 
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯æœ99ç€ã¨ã‚³ãƒ¼ãƒ‡33å€‹ãŒå­˜åœ¨
- ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆlocalhost:3000ï¼‰ã§ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒ¼ãƒ–ã‚„ã‚³ãƒ¼ãƒ‡ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã‚‚ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„
- æ–°ã—ãè¿½åŠ ã—ãŸãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆå¤æœãƒ»å¤ã‚³ãƒ¼ãƒ‡ï¼‰ãŒè¦‹ãˆãªã„

**ç’°å¢ƒ**: 
- Next.js 15.3.3
- T3 Stack (tRPC + Drizzle ORM + Better Auth)
- PostgreSQL
- localhost:3000

**å†ç¾æ‰‹é †**:
1. ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æœã¨ã‚³ãƒ¼ãƒ‡ã‚’è¿½åŠ 
2. ãƒ–ãƒ©ã‚¦ã‚¶ã§localhost:3000ã«ã‚¢ã‚¯ã‚»ã‚¹
3. ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒ¼ãƒ–ãƒšãƒ¼ã‚¸ãƒ»ã‚³ãƒ¼ãƒ‡ãƒšãƒ¼ã‚¸ã‚’ç¢ºèª
4. ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„

**è©¦è¡ŒéŒ¯èª¤**:
âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª â†’ ãƒ‡ãƒ¼ã‚¿ã¯æ­£å¸¸ã«å­˜åœ¨  
âŒ tRPCã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèª â†’ APIå®Ÿè£…ã¯æ­£å¸¸  
âŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç¢ºèª â†’ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…ã¯æ­£å¸¸  
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³èª¿æŸ» â†’ **æ ¹æœ¬åŸå› ã‚’ç™ºè¦‹**

**èª¿æŸ»çµæœ**:
```
ğŸ‘¥ ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: 16
- demo-user-1: æœ99ç€ã€ã‚³ãƒ¼ãƒ‡33å€‹ï¼ˆãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿è±Šå¯Œï¼‰
- æ³¡æ²«: æœ1ç€ã€ã‚³ãƒ¼ãƒ‡0å€‹
- ãã®ä»–: Passkeyãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„Anonymousãƒ¦ãƒ¼ã‚¶ãƒ¼

ğŸ” ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³:
- demo-user-1: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³0å€‹ âŒ
- æ³¡æ²«: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³1å€‹ âœ…
```

**æ ¹æœ¬åŸå› **: 
**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¸ä¸€è‡´**
- ãƒ‡ãƒ¼ã‚¿ãŒè±Šå¯Œãª`demo-user-1`ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒãªã„
- å®Ÿéš›ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã®ã¯åˆ¥ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆ"æ³¡æ²«"ï¼‰
- T3 Stackã®`protectedProcedure`ã«ã‚ˆã‚Šå„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿é–²è¦§å¯èƒ½

**æŠ€è¡“çš„è©³ç´°**:
```typescript
// å•é¡Œã®ã‚ã‚‹ã‚¯ã‚¨ãƒªä¾‹ï¼ˆsrc/server/api/routers/clothing.tsï¼‰
getAll: protectedProcedure.query(({ ctx, input }) => {
  return ctx.db
    .select()
    .from(clothingItems)
    .where(eq(clothingItems.userId, ctx.session.user.id)) // ã“ã“ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†é›¢
    .orderBy(desc(clothingItems.createdAt));
});
```

**æœ€çµ‚è§£æ±ºæ–¹æ³•**:
1. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ**: `demo-user-1`ç”¨ã®æœ‰åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
2. **ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®š**: é©åˆ‡ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã«å¤‰æ›´

```javascript
// ãƒ–ãƒ©ã‚¦ã‚¶ã®JavaScriptã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
document.cookie = "authjs.session-token=AZDi6KYhfmuwTpOfZjTkN0JMdELN5FEY; path=/; max-age=2592000";
location.reload();
```

**äºˆé˜²ç­–**:
1. **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆæ™‚ã®æ³¨æ„**: ãƒ‡ãƒ¼ã‚¿ä½œæˆã¨åŒæ™‚ã«å¯¾å¿œã™ã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚‚ä½œæˆ
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆç¢ºèª**: ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ãˆãªã„å ´åˆã¯ã¾ãšèªè¨¼çŠ¶æ…‹ã‚’ç–‘ã†
3. **ãƒ‡ãƒãƒƒã‚°æ‰‹é †ã®æ¨™æº–åŒ–**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ vs ãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤ºã®æ•´åˆæ€§ç¢ºèª

**å­¦ã‚“ã ã“ã¨**:
- T3 Stackã®èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ãŒç¢ºå®Ÿã«æ©Ÿèƒ½
- Better Authã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®é‡è¦æ€§
- `protectedProcedure`ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŠ¹æœ
- ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã®é‡è¦æ€§

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `/src/server/api/routers/clothing.ts`
- `/src/server/api/routers/outfit.ts`
- `/src/server/db/schema.ts` (sessions table)
- `/src/server/auth.ts`

**è§£æ±ºæ™‚é–“**: ç´„30åˆ†

---

**æœ€çµ‚æ›´æ–°**: 2025-06-25  
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®š**: 2025-07-25  
**ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ‹…å½“**: é–‹ç™ºè€…